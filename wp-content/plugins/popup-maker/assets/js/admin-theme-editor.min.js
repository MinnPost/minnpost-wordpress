var PopMakeAdmin;!function(e,t,o){"use strict";window.PUM_Admin=window.PUM_Admin||{};var i=e(t);PopMakeAdmin={theme_page_listeners:function(){var o=this;e(".empreview .example-popup-overlay, .empreview .example-popup, .empreview .title, .empreview .content, .empreview .close-popup").css("cursor","pointer"),e(t).on("click",".empreview .example-popup-overlay, .empreview .example-popup, .empreview .title, .empreview .content, .empreview .close-popup",function(t){var o=e(this),i=o.attr("class"),n=0;switch(t.preventDefault(),t.stopPropagation(),i){case"example-popup-overlay":n=e("#popmake_popup_theme_overlay").offset().top;break;case"example-popup":n=e("#popmake_popup_theme_container").offset().top;break;case"title":n=e("#popmake_popup_theme_title").offset().top;break;case"content":n=e("#popmake_popup_theme_content").offset().top;break;case"close-popup":n=e("#popmake_popup_theme_close").offset().top}e("html, body").animate({scrollTop:n+"px"})}).on("change","select.font-family",function(){e("select.font-weight option, select.font-style option",e(this).parents("table")).prop("selected",!1),o.update_font_selectboxes()}).on("change","select.font-weight, select.font-style",function(){o.update_font_selectboxes()}).on("change input focusout","select, input",function(){o.update_theme()}).on("change","select.border-style",function(){var t=e(this);"none"===t.val()?t.parents("table").find(".border-options").hide():t.parents("table").find(".border-options").show()}).on("change","#popup_theme_close_location",function(){var t=e(this),o=t.parents("table");e("tr.topleft, tr.topright, tr.bottomleft, tr.bottomright",o).hide(),e("tr."+t.val(),o).show()})},update_theme:function(){var t,o=e("[name^='popup_theme_']").serializeArray(),i={};for(t=0;o.length>t;t+=1)0===o[t].name.indexOf("popup_theme_")&&(i[o[t].name.replace("popup_theme_","")]=o[t].value);this.retheme_popup(i)},theme_preview_scroll:function(){var t=e("#popmake-theme-editor .empreview, body.post-type-popup_theme form#post #popmake_popup_theme_preview"),o=t.parent(),i=t.offset().top-50;e(window).on("scroll",function(){e("> .postbox:visible",o).index(t)===e("> .postbox:visible",o).length-1&&e(window).scrollTop()>=i?t.css({left:t.offset().left,width:t.width(),height:t.height(),position:"fixed",top:50}):t.removeAttr("style")})},update_font_selectboxes:function(){return e("select.font-family").each(function(){var t,i,n=e(this),p=n.parents("table").find("select.font-weight"),s=n.parents("table").find("select.font-style"),l=p.find("option"),a=s.find("option");if(popmake_google_fonts[n.val()]!==o){if(t=popmake_google_fonts[n.val()],l.hide(),a.hide(),t.variants.length)for(i=0;t.variants.length>i;i+=1)"regular"===t.variants[i]?(e('option[value=""]',p).show(),e('option[value=""]',s).show()):(t.variants[i].indexOf("italic")>=0&&e('option[value="italic"]',s).show(),e('option[value="'+parseInt(t.variants[i],10)+'"]',p).show())}else l.show(),a.show();p.parents("tr:first").show(),p.find("option:visible").length<=1?p.parents("tr:first").hide():p.parents("tr:first").show(),s.parents("tr:first").show(),s.find("option:visible").length<=1?s.parents("tr:first").hide():s.parents("tr:first").show()})},convert_theme_for_preview:function(e){},initialize_theme_page:function(){e("#popup-titlediv").insertAfter("#titlediv");var o=this,i=e("#popup_theme_close_location").parents("table");switch(o.update_theme(),o.theme_page_listeners(),o.theme_preview_scroll(),o.update_font_selectboxes(),e(t).on("click",".popmake-preview",function(t){t.preventDefault(),e("#popmake-preview, #popmake-overlay").css({visibility:"visible"}).show()}).on("click",".popmake-close",function(){e("#popmake-preview, #popmake-overlay").hide()}),e("select.border-style").each(function(){var t=e(this);"none"===t.val()?t.parents("table").find(".border-options").hide():t.parents("table").find(".border-options").show()}),e(".pum-color-picker.background-color").each(function(){var t=e(this);""===t.val()?t.parents("table").find(".background-opacity").hide():t.parents("table").find(".background-opacity").show()}),e("tr.topleft, tr.topright, tr.bottomleft, tr.bottomright",i).hide(),e("#popup_theme_close_location").val()){case"topleft":e("tr.topleft",i).show();break;case"topright":e("tr.topright",i).show();break;case"bottomleft":e("tr.bottomleft",i).show();break;case"bottomright":e("tr.bottomright",i).show()}},retheme_popup:function(i){var n,p=e(".empreview .example-popup-overlay, #popmake-overlay"),s=e(".empreview .example-popup, #popmake-preview"),l=e(".title, .popmake-title",s),a=e(".content, .popmake-content",s),r=e(".close-popup, .popmake-close",s),_="yes"===i.container_boxshadow_inset?"inset ":"",c="yes"===i.close_boxshadow_inset?"inset ":"";switch(this.convert_theme_for_preview(i),popmake_google_fonts[i.title_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.title_font_family,"normal"!==i.title_font_weight&&(n+=":"+i.title_font_weight),"italic"===i.title_font_style&&(n.indexOf(":")===-1&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),popmake_google_fonts[i.content_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.content_font_family,"normal"!==i.content_font_weight&&(n+=":"+i.content_font_weight),"italic"===i.content_font_style&&(n.indexOf(":")===-1&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),popmake_google_fonts[i.close_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.close_font_family,"normal"!==i.close_font_weight&&(n+=":"+i.close_font_weight),"italic"===i.close_font_style&&(n.indexOf(":")===-1&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),p.removeAttr("style").css({backgroundColor:window.PUM_Admin.utils.convert_hex(i.overlay_background_color,i.overlay_background_opacity)}),s.removeAttr("style").css({padding:i.container_padding+"px",backgroundColor:window.PUM_Admin.utils.convert_hex(i.container_background_color,i.container_background_opacity),borderStyle:i.container_border_style,borderColor:i.container_border_color,borderWidth:i.container_border_width+"px",borderRadius:i.container_border_radius+"px",boxShadow:_+i.container_boxshadow_horizontal+"px "+i.container_boxshadow_vertical+"px "+i.container_boxshadow_blur+"px "+i.container_boxshadow_spread+"px "+window.PUM_Admin.utils.convert_hex(i.container_boxshadow_color,i.container_boxshadow_opacity)}),l.removeAttr("style").css({color:i.title_font_color,lineHeight:i.title_line_height+"px",fontSize:i.title_font_size+"px",fontFamily:i.title_font_family,fontStyle:i.title_font_style,fontWeight:i.title_font_weight,textAlign:i.title_text_align,textShadow:i.title_textshadow_horizontal+"px "+i.title_textshadow_vertical+"px "+i.title_textshadow_blur+"px "+window.PUM_Admin.utils.convert_hex(i.title_textshadow_color,i.title_textshadow_opacity)}),a.removeAttr("style").css({color:i.content_font_color,fontFamily:i.content_font_family,fontStyle:i.content_font_style,fontWeight:i.content_font_weight}),r.html(i.close_text).removeAttr("style").css({padding:i.close_padding+"px",height:i.close_height>0?i.close_height+"px":"auto",width:i.close_width>0?i.close_width+"px":"auto",backgroundColor:window.PUM_Admin.utils.convert_hex(i.close_background_color,i.close_background_opacity),color:i.close_font_color,lineHeight:i.close_line_height+"px",fontSize:i.close_font_size+"px",fontFamily:i.close_font_family,fontWeight:i.close_font_weight,fontStyle:i.close_font_style,borderStyle:i.close_border_style,borderColor:i.close_border_color,borderWidth:i.close_border_width+"px",borderRadius:i.close_border_radius+"px",boxShadow:c+i.close_boxshadow_horizontal+"px "+i.close_boxshadow_vertical+"px "+i.close_boxshadow_blur+"px "+i.close_boxshadow_spread+"px "+window.PUM_Admin.utils.convert_hex(i.close_boxshadow_color,i.close_boxshadow_opacity),textShadow:i.close_textshadow_horizontal+"px "+i.close_textshadow_vertical+"px "+i.close_textshadow_blur+"px "+window.PUM_Admin.utils.convert_hex(i.close_textshadow_color,i.close_textshadow_opacity)}),i.close_location){case"topleft":r.css({top:i.close_position_top+"px",left:i.close_position_left+"px"});break;case"topright":r.css({top:i.close_position_top+"px",right:i.close_position_right+"px"});break;case"bottomleft":r.css({bottom:i.close_position_bottom+"px",left:i.close_position_left+"px"});break;case"bottomright":r.css({bottom:i.close_position_bottom+"px",right:i.close_position_right+"px"})}e(t).trigger("popmake-admin-retheme",[i])}},e(".popmake-range-manual").addClass("pum-range-manual").parent("td").addClass("pum-field").addClass("pum-field-rangeslider"),e(".range-value-unit").addClass("pum-range-value-unit"),i.ready(function(){PopMakeAdmin.initialize_theme_page(),i.trigger("pum_init"),e("#pum-first-condition, #pum-first-trigger, #pum-first-cookie").val(null).trigger("change")})}(jQuery,document);